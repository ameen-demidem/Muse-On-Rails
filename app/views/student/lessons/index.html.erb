<p id="notice"><%= notice %></p>

<h1>Lessons</h1>
<div class="row">
  <div class="col s12 white-text">
    <div class="card-panel hoverable">
      <table id="listOfLessons">
        <thead>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Start time</th>
            <th>End time</th>
            <th>User</th>
            <th>Teacher</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @lessons.each do |lesson| %>
            <% if current_user.id == lesson.student_id %>
              <tr>
                <td><%= lesson.title %></td>
                <td><%= lesson.description %></td>
                <td><%= lesson.start_time %></td>
                <td><%= lesson.end_time %></td>
                <td><%= lesson.student.name %></td>
                <td><%= lesson.teacher.name %></td>
                <td><%= link_to 'Show', teacher_lesson_path(lesson) %></td>
                <td><%= link_to 'Edit', edit_teacher_lesson_path(lesson) %></td>
                <td><%= link_to 'Destroy', teacher_lesson_path(lesson), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>

      <br>
      <%= link_to 'New Lesson', new_teacher_lesson_path %>
      <div class="" id="calendar"></div>
    </div>
  </div>
</div>
<script>
  $(document).on('turbolinks:load', function(){
    $('#calendar').fullCalendar({
      defaultView: 'agendaWeek',
      height: 'auto',
      minTime: "08:00:00",
      allDaySlot: false,
      events: {
        url: '/student/lessons.json',
        color: 'red',
        textColor: 'white'
      },
      theme: true,
      timeFormat: 'h(:mm)'
    });
  });

</script>
