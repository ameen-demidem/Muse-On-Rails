<% if @homework.errors.any? %>
  <div class="row">
    <div class="col s12">
      <div class="card-panel hoverable thick">
        <div class="white-text">
          <h5>Some issues with your entry, please fix them:</h5>
          <ol>
            <% @homework.errors.full_messages.each do |error| %>
              <li class="errors-list"><%= error %></li>
            <% end %>
          </ol>
        </div>
      </div>
    </div>
  </div>
<% end %>

<h3 class="center button-spacing white-text">
  <span class="thin">New Homework For</span> <%= @student.name %>
</h3>
<div class="row button-spacing">
  <div class="col s12 white-text">
    <div class="card-panel hoverable">
      <%= form_for [:teacher, :student, @homework], multipart: true do |f| %>
        <div class="row col s10 offset-s1">
          <h5 class="h-5-spacing">This weeks homework</h5>
          <div class="input-field button-spacing">
            <%= f.label "This weeks homework is called: ", class: "active" %>
            <%= f.text_field :title, class: "validate",
              placeholder: "E.g. 'week of july 15th: Circle of 5ths'" %>
          </div>
          <div class="input-field">
            <%= f.label "Important notes", class: "active" %>
            <%= f.text_field :note, class: "validate",
              placeholder: "This week I want to to spend time understanding..." %>
          </div>
        </div>
        <div class="row">
          <div class="col s10 offset-s1">
            <div class="button-spacing row valign-wrapper">
              <h5 class="col left"><strong>Tasks for the homework</strong></h5>
              <div class="col left">
                <a onClick="teacher_new_homework_view.AddTask()",
                   class="btn-floating waves-effect waves-light green">
                    <i class="material-icons">add</i>
                </a>
              </div>
            </div>
            <div class="button-spacing">
              <ul id="homework-task-list" class="collection">
                <%= f.fields_for :tasks do |task_form| %>
                  <li class="button-spacing valign-wrapper blue-grey darken-3">
                    <div class="col s12">
                      <div class="input-field col s12">
                        <%= task_form.label :description, class: "active" %>
                        <%= task_form.text_field :item, class: "validate" %>
                      </div>
                      <div class="input-field col s6">
                        <%= task_form.label :URL, class: "active" %>
                        <%= task_form.text_field :url, class: "validate" %>
                      </div>
                      <div class="file-field input-field col s6">
                        <div class="btn">
                          <span>File</span>
                          <%= task_form.file_field :attachment, class: "validate",
                            onChange: "toggleTaskURLFieldDisabledStatus($(this))" %>
                        </div>
                        <div class="file-path-wrapper">
                          <input class="file-path validate" type="text" placeholder="Upload one or more files">
                        </div>
                      </div>
                    </div>
                    <div class="col valign">
                      <a onClick="teacher_new_homework_view.RemoveTask(this)",
                         class="btn-floating waves-effect waves-light red" >
                          <i class="material-icons">cancel</i>
                      </a>
                    </div>
                  </li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
        <div class="center">
          <%= button_tag "Assign!", class: "btn waves-effect waves-light form-button green" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
